# Cursor 高级用法：MCP 让 AI 连接外部世界 — 逐字稿

---

hello 大家好，欢迎来到我的 Cursor 课程。上节课我们把 Cursor 的基础功能和工作模式都过了一遍，这节课我们进入一个非常实用、也非常激动人心的主题——MCP。

MCP 是什么？简单来说，就是让 Cursor 里的 AI 能够连接外部世界的一套协议。很多同学刚接触这个词可能会觉得有点陌生，但学完这节课，我相信你会发现——哦，原来 AI 还能这样用。

我们这节课会讲以下几个部分：第一，为什么需要 MCP，从一个你可能天天遇到的痛点说起；第二，MCP 到底是什么，帮大家建立正确的概念；第三，MCP 是怎么工作的，原理层面讲清楚；第四，手把手带大家做第一个配置；第五，几个高价值的实战场景；最后是安全使用和最佳实践。好，我们开始。

---

## 一、从一个真实痛点说起

先问大家一个问题——你有没有遇到过这种情况？

你让 Cursor 帮你做一个跟项目相关的任务，然后你就开始不停地给它解释：「我的数据库有这几张表，字段是这些，关系是这样的……」「我的项目结构是这样的，文件在这里……」「接口的返回格式是这个……」

说实话，感觉像在给一个新来的实习生补课，补了半天，他可能还是理解得不太准确。

这是为什么？因为传统的 AI 助手，包括早期的 Cursor，它的能力边界是有限制的。它不知道你的数据库里有什么数据，它看不到你本地的文件系统，它无法直接去调用你的 API 拿到实时的结果。每次都要靠你手动把信息复制粘贴给它，这个效率是非常的低的。

更直接的说：AI 很聪明，但它是个「瞎子」——看不到外部世界。MCP 就是给它装上了「眼睛」。

---

## 二、MCP 是什么？

MCP 的全称是 Model Context Protocol，中文叫「模型上下文协议」，是由 Anthropic 公司推出的一套开放标准协议。

光听名字可能还是有点绕，我用一个类比来帮大家理解。

大家知道 USB-C 接口吗？以前我们用手机充电，iPhone 用 Lightning 口，安卓用 Micro-USB，笔记本又是另一套，充电线各种各样，非常的麻烦。后来 USB-C 出现了，一根线走天下，什么设备都能用同一个接口。

MCP 就是 AI 世界里的 USB-C 接口。它提供了一套统一的标准，让 AI 应用——不只是 Cursor，还有 Claude Desktop 等其他工具——都能用同一种方式去连接外部的工具和数据。

这个设计非常的聪明。以前如果你想让 Cursor 连接数据库，Cursor 团队要自己开发一套；让 Claude 连接数据库，Anthropic 要再开发一套，重复造轮子，还互不兼容。MCP 出现之后，开发者只需要按照 MCP 标准写一个数据库连接器，所有支持 MCP 的 AI 工具都能用。这就是「一次编写，到处使用」的理念。

---

## 三、传统 AI 和启用 MCP 的 Cursor，差别有多大？

我们来做一个直接的对比，让大家感受一下这个变化有多大。

传统的 AI 助手，访问外部工具——不行；实时获取数据——不行；执行系统操作——不行；自定义工作流——也不行。基本上，你给它什么它用什么，它自己伸不出手去拿东西。

启用 MCP 之后的 Cursor 呢？这些全部都可以。它可以连接任意外部工具，可以实时查询数据库，可以操作文件系统，可以调用各种 API，还可以根据你的需求自定义专属的工作流。

简单来说，就是 AI 从一个「被动的建议者」，变成了一个「主动的执行者」。以前它只能给你提意见，现在它能自己去干活了。就像我们之前说的，AI 从原来只是被动地给我们一些建议的伙伴，变成了一个可以不分昼夜帮我们干活的牛马。

---

## 四、MCP 是怎么工作的？

好，概念建立之后，我们来看看 MCP 内部是怎么运作的。

MCP 的架构可以理解为三层。最上面是 MCP Host，就是 Cursor 这个 AI 应用。中间是 MCP Client，它负责管理连接。最下面是 MCP Server，它是包装外部服务的那一层，可以包装数据库、API、文件系统等等。

整个调用链是这样的：

你在 Cursor 里输入一个需求，比如说「帮我查一下用户表里最近 7 天注册的用户」。AI 拿到这个请求，先解析你的意图，判断需要去查数据库。然后它向 MCP Server 请求可用工具的列表，MCP Server 告诉它「我有查数据库这个工具」。AI 选择这个工具，发起调用请求，MCP Server 去真正连接数据库、执行 SQL，把结果返回给 AI，AI 再把结果整理成你能看懂的格式给你展示出来。

这整个过程，对你来说是完全透明的。你只需要像平时一样和 Cursor 对话，AI 会自己判断什么时候需要调用外部工具，你不需要说「去执行 SQL」这种指令。

另外说一下传输方式，MCP 支持两种：一种叫 stdio，服务跑在本地，Cursor 自动帮你管理，配置非常简单，适合个人开发，这也是我推荐新手优先用的方式；另一种叫 SSE 或者 HTTP，它支持网络通信，可以部署在远程服务器，适合团队共享使用，或者数据库在云端的场景。大部分情况下，我们用 stdio 就够了。

---

## 五、快速上手：配置你的第一个 MCP Server

好，我们进入实操环节。先说一下前置条件：

第一，Cursor 版本要在 0.45.6 以上，这个在 Cursor 的帮助菜单里可以查到；第二，要装好 Node.js，版本 18 或者更高，大家可以在命令行里输入 `node -v` 检查一下。

MCP 的配置文件叫做 `mcp.json`，放在两个地方：全局配置放在用户主目录下的 `.cursor/mcp.json`，对你所有项目生效；项目配置放在项目目录下的 `.cursor/mcp.json`，只对当前项目生效。我的建议是，常用的通用 Server 放全局，项目专有的——比如数据库连接——放项目配置，这样管理起来比较清晰。

打开配置界面的快捷键，Windows 和 Linux 是 `Ctrl+Shift+J`，macOS 是 `Cmd+Shift+J`，然后找到 Tools & Integrations，点 New MCP Servers 就能编辑配置文件了。

配置文件的结构很简单，就三个字段：`command` 是执行的命令，通常是 `npx`；`args` 是参数，填 MCP Server 的包名；`env` 是环境变量，用来传 Token、密码这些敏感信息的。

我们先来配置最简单的一个——Fetch Server。它的功能是让 AI 能直接抓取网页内容，而且完全不需要任何 Token，是最适合入门的第一个 Server。

配置也非常的简洁：

```json
{
  "mcpServers": {
    "fetch": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-fetch"]
    }
  }
}
```

就这几行，保存，重启 Cursor——这一步很重要，修改配置之后一定要重启，才能生效——然后你就可以测试了。

打开对话，直接跟 Cursor 说：「帮我抓取 https://docs.cursor.com 的主要内容，总结一下有哪些核心功能」。你会发现 AI 自己去抓取了网页，不需要你手动复制粘贴任何东西。这种感觉挺神奇的，大家试了就知道。

---

## 六、进阶场景：几个高价值的 MCP 应用

配置好 Fetch Server 之后，我们再来看几个更有价值的场景。

**第一个是 GitHub 集成。** 对程序员来说，这个是非常的实用。配置好 GitHub MCP 之后，你可以直接在 Cursor 里说：「帮我查一下仓库里标记为 bug 的未解决 Issue」，或者「帮我在 dev 分支上创建一个 feature/login 的新分支」，甚至「把这次改动提交一个 PR，帮我写好描述」。整个操作都在 Cursor 里完成，不用切换到浏览器。

配置需要一个 GitHub 的 Personal Access Token，在 GitHub 的 Settings → Developer settings → Personal access tokens 里生成，记得勾上 repo 权限。然后把 Token 放在配置文件的 env 字段里，不要直接写在代码里——这个安全问题我们后面会专门讲。

**第二个是数据库直连，这是效率提升最明显的场景。** 以前你让 AI 帮你写 SQL，你要先把表结构复制给它，解释字段含义，说明表之间的关系，很麻烦。配置了数据库 MCP 之后，AI 能直接连接你的真实数据库，自己去分析表结构，生成的 SQL 是完全基于你的实际数据，非常的准确。

你可以直接说：「查询用户表中最近 7 天注册的用户，按注册时间倒序，然后生成一个 React 列表组件展示出来」。AI 会自动连接数据库、分析表结构、生成精确的 SQL，然后写出完整的组件代码，一气呵成。

**第三个是文件系统操作。** 这个在做代码整理的时候特别好用。比如一个项目维护了很久，里面有很多未使用的 import 语句，手动一个个找非常的累。配置了文件系统 MCP 之后，直接说「帮我扫描整个项目，找出所有未使用的 import 并清理掉」，AI 会自动遍历文件、检查、修改，帮你做完整套清理工作。

关于 MCP Server 的选择，我给大家推荐一个入门路径：先装 Fetch，没有门槛，立马就能用；然后装 GitHub，开发者日常频率最高；再之后根据项目需要装数据库的；还有一个 Sequential Thinking Server，它是用来增强 AI 推理能力的，配置了之后 AI 在做复杂任务时会更加的准确，也推荐大家装上。

---

## 七、高效使用技巧

配置好 MCP 只是第一步，怎么用好它，也是有技巧的。

最核心的一点：给 AI 的提示越明确，它调用工具的效果越好。

我举个对比的例子。同样是想查天气数据，你说「帮我获取一些天气数据」，AI 可能就不知道该调哪个接口、查哪个城市、要什么格式的数据。但如果你说「使用 OpenWeatherMap API 获取北京未来 5 天的天气预报，以表格形式展示温度和天气状况」，AI 就能精准地调用工具，一次就给你想要的结果。

另外说一下，MCP 的一个很强大的用法是组合多个工具。比如「先搜索最新的 React 状态管理方案，然后在我的项目里安装推荐的库，并创建一个示例组件」——这一句话，AI 会依次用到搜索工具、文件操作工具、代码生成能力，整个链条串起来，非常的流畅。

---

## 八、安全使用三原则

使用 MCP 的时候，会涉及到很多敏感信息，这里有三点我必须强调。

**第一，防止 Token 泄露。** 项目级的 `.cursor/mcp.json` 一定要加入 `.gitignore`，不然你的 Token 一提交到 GitHub 上，分分钟就可能被别人拿去滥用。这个是非常严重的安全问题，大家一定要注意。

**第二，用环境变量传递敏感信息。** Token、密码这些敏感内容，永远放在 `env` 字段里，不要硬编码在 args 里或者配置文件的明显位置。而且最好定期轮换你的 Token，GitHub 的 Token 可以设置过期时间，这个建议都设上。

**第三，最小权限原则。** 申请 Token 的时候，只勾选你真正需要的权限。数据库账号如果只需要查询，就只开读权限，不要用 root 账号直接连。权限越小，万一出了问题损失也越小。

---

## 九、常见问题

最后讲几个常见的报错情况，帮大家少走弯路。

配置之后 MCP 没有生效？最常见的原因就是没有重启 Cursor，记住，修改配置之后**必须重启**才能生效。

AI 不去调用工具？这通常是提示不够明确，或者 JSON 配置格式有问题。配置文件里多一个逗号、少一个引号，都会导致解析失败。可以用在线的 JSON 验证工具检查一下格式。

Windows 用户在配置文件路径的时候要注意，路径分隔符用正斜杠 `/` 或者双反斜杠 `\\`，单个反斜杠 `\` 在 JSON 里是转义字符，会出问题。

---

## 总结

好，我们来总结一下这节课的核心内容。

MCP 的本质，是给 AI 装上了连接外部世界的统一标准接口，让 AI 从「被动的建议者」变成了「主动的执行者」。

工作原理上，三层架构——Host、Client、Server——完成了从用户输入到工具执行的整个链路，整个过程对我们用户是透明的。

上手路径上，我建议大家从 Fetch Server 开始，没有任何门槛，五分钟就能跑起来，感受到 MCP 的威力之后，再根据自己的需求逐步添加 GitHub、数据库等 Server。

最后要记住安全三原则：mcp.json 加入 .gitignore、敏感信息用环境变量、坚持最小权限。

下节课，我们将进入 Cursor 的 Rules 功能——如何给 AI 设定规则和规范，让它更懂你的项目风格，生成的代码质量更高。

好，谢谢大家。
